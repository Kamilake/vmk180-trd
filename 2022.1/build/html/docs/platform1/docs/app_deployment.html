<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Setting up the Board and Application Deployment &mdash; VMK180 TRD 2022.1 documentation</title><link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Tool Flow Overview" href="../../building_the_design.html" />
    <link rel="prev" title="Design Overview" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> VMK180 TRD
          </a>
              <div class="version">
                4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../platform1_landing.html">VMK180 TRD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#features">Features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../platform1_landing.html#quick-start">Quick Start</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Design Overview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up the Board and Application Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-board">Setting up the Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-the-application">Run the Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#host-machine-software-setup">Host Machine Software setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating-the-pcie-device-id-if-needed">Updating the PCIe device ID (if needed)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate-of-raw-video-input-file">Generate of Raw video Input file.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-host-and-ep-applications">Run Host and EP applications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#steps-to-run-host-application">Steps to run Host application :</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#architecture-documents">Architecture Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#other">Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#xilinx-support">Xilinx Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform1_landing.html#license">License</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/vmk180-trd/2022.1/build/html/index.html">     Master (2022.1)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/vmk180-trd/2021.2/build/html/index.html">     2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/vmk180-trd/2021.1/build/html/index.html">     2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/vmk180-trd/2020.2/build/html/index.html">     2020.2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VMK180 TRD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../platform1_landing.html">VMK180 TRD</a> &raquo;</li>
      <li>Setting up the Board and Application Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/platform1/docs/app_deployment.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1> Versal Prime -VMK180 Evaluation Kit TRD Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Setting up the Board and Application Deployment</h1> </td>
 </tr>
</table><div class="section" id="setting-up-the-board-and-application-deployment">
<h1>Setting up the Board and Application Deployment<a class="headerlink" href="#setting-up-the-board-and-application-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document shows how to set up the board and run the VMK180 TRD application.</p>
</div>
<div class="section" id="setting-up-the-board">
<h2>Setting up the Board<a class="headerlink" href="#setting-up-the-board" title="Permalink to this headline">¶</a></h2>
<div class="section" id="flash-the-sd-card">
<h3>Flash the SD Card<a class="headerlink" href="#flash-the-sd-card" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Download  the <code class="docutils literal notranslate"><span class="pre">vmk180_trd_prebuilt_2022.1.zip</span></code> package, unzip and save it on your computer. Alternatively, Go through tutorials section to build <code class="docutils literal notranslate"><span class="pre">petalinux-sdimage.wic</span></code> locally.</p>
</li>
<li><p class="first">To uncompress wic file use following command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">vmk180_trd_prebuilt_2022</span><span class="o">.</span><span class="mi">1</span>
<span class="n">xz</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">v</span> <span class="n">petalinux</span><span class="o">-</span><span class="n">sdimage</span><span class="o">.</span><span class="n">wic</span><span class="o">.</span><span class="n">xz</span>
</pre></div>
</div>
<p>This generates a output file named
<code class="docutils literal notranslate"><span class="pre">petalinux-sdimage.wic</span></code>.</p>
</li>
<li><p class="first">Connect the microSD to your computer.</p>
</li>
<li><p class="first">Download the <a class="reference external" href="https://www.balena.io/etcher/">Balena Etcher tool</a> (recommended; available for Window, Linux, and
macOS) required to flash the SD card.</p>
</li>
<li><p class="first">Follow the instructions in the tool and select the downloaded image to flash onto your microSD card.</p>
<p><img alt="Balena Etcher" src="../../../_images/balena.png" /></p>
</li>
<li><p class="first">Eject the SD card from your computer.</p>
<p>If you are looking for other OS specific tools to write the image to the SD card refer to <a class="reference external" href="https://www.xilinx.com/products/som/kria/kv260-vision-starter-kit/kv260-getting-started/setting-up-the-sd-card-image.html">Setting up the SD Card Image</a></p>
</li>
</ul>
</div>
<div class="section" id="hardware-setup">
<h3>Hardware Setup:<a class="headerlink" href="#hardware-setup" title="Permalink to this headline">¶</a></h3>
<p>Below diagram shows Board and hardware connections.</p>
<p><img alt="GitHub Logo" src="../../../_images/vmk180-setup.png" /></p>
<p><strong>Board jumper and switch settings</strong>
This is a onetime setup and the board should have been delivered to you with this default settings, but it is good to double check for the first time when you get the board.</p>
<ul>
<li><p class="first">Make sure you remove J326 (7-8) jumper.</p>
</li>
<li><p class="first">Setup SYSCTRL Boot mode switch SW11 to (ON,OFF,OFF,OFF) from switch bits 1 to 4 as shown in the above picture.</p>
</li>
<li><p class="first">Setup Versal Boot Mode switch SW1 to (ON,OFF,OFF,OFF) from switch bits 1 to 4 as shown in the above picture.</p>
</li>
<li><p class="first"><strong>microSD</strong>: Insert the SD card into slot at Versal microSD slot (top).</p>
<p>Make sure you have the SYSCTRL uSD card inserted in the slot (bottom) and card has the SYSCTRL image. For Latest version of SYSCTRL image, refer to <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/972914749/BEAM+Tool+for+VMK180+Evaluation+Kit">Beam Tool Wiki Page</a></p>
</li>
<li><p class="first"><strong>Monitor</strong> : Before booting, connect a 1080P/4K monitor to the board via top HDMI port. 4K monitor is preferred to demonstrate at the maximum supported resolution.</p>
<blockquote>
<div><p><strong>Note</strong>: The design has been validated with Dell Flat panel(U2718Q) &amp; Viewsonic (SS16024) monitors.</p>
</div></blockquote>
</li>
</ul>
<p><strong>FMC and Vadj settings</strong></p>
<p>Before power on, install an  Leopard IMX274 MIPI FMC card to the FMCP1 slot (J51) as shown in the above figure.
Perform the following steps to set the Vadj voltage rail to 1.2V using the BoardUI utility:</p>
<ul class="simple">
<li>Download the BoardUI Utility from VMK180 Product Page: <a class="reference external" href="https://www.xilinx.com/support/documentation-navigation/see-all-versions.html?xlnxproducttypes=Boards%20and%20Kits&amp;xlnxdocumentid=XTP623">BoardUI/ Board Interface Test</a></li>
<li>Extract the zip file and start the BoardUI tool. Make sure the USB-C cable is connected to your PC and the system controller Micro SD card is inserted.</li>
<li>In the BoardUI GUI, navigate to the FMC Boot Up tab following the red circles as shown in the below figure. Enter 1.2 in the Set On-Boot VADJ field and click the button next to it to save the value.</li>
</ul>
<p><img alt="BoardUI" src="../../../_images/boardui.jpg" /></p>
<ul class="simple">
<li>Power-cycle the board and navigate to the FMC Current tab. Click the Get VADJ_FMC Voltage button to read out the current voltage setting and confirm it matches the 1.2V set in the previous step.</li>
<li>Close the BoardUI utility.</li>
</ul>
<blockquote>
<div><strong>Note</strong>: For the IMX274 MIPI FMC v1.1, Vadj voltage rail is required to be set to 1.5V instead of 1.2V.</div></blockquote>
<ul>
<li><p class="first"><strong>Serial console settings</strong>: VMK180 comes with a USB-C connector for JTAG+UART, when connected three UART ports should be visible in Device Manager:</p>
<ul class="simple">
<li>Versal UART0</li>
<li>Versal UART1 &amp;</li>
<li>System Controller UART</li>
</ul>
</li>
<li><p class="first">Connect a USB-C cable to the USB-UART connector. In the terminal emulator choose Versal UART0 and use the following settings:</p>
<ul class="simple">
<li>Baud Rate: 115200</li>
<li>Data: 8 bit</li>
<li>Parity: None</li>
<li>Stop: 1 bit</li>
<li>Flow Control: None</li>
</ul>
</li>
<li><p class="first"><strong>Network connection</strong>:</p>
<p>Connect the Ethernet cable to your local network with DHCP enabled to run Jupyter Notebooks</p>
</li>
</ul>
</div>
<div class="section" id="power-on-the-board-and-boot-the-linux-image">
<h3>Power on the board, and boot the Linux image.<a class="headerlink" href="#power-on-the-board-and-boot-the-linux-image" title="Permalink to this headline">¶</a></h3>
<p>Follow these steps to boot the board into Linux:</p>
<ul class="simple">
<li>Ensure all steps under the section ‘Board jumper and switch settings’ are verified.</li>
<li>Insert the prepared micro SD card into the Versal SD card slot (refer to the image VMK180 Board Setup)</li>
<li>Make physical connections to ethernet, HDMI, UART, webcam and power as shown in the image.</li>
<li>Turn ON power switch SW13.</li>
<li>On Versal UART0 terminal, we would see the Versal device booting from the micro SD card starting with the message “Xilinx Versal Platform Loader and Manager”</li>
</ul>
<blockquote>
<div><strong>Note</strong>: Below messages observed during linux boot don’t impact VMK180 TRD functionality and it is safe to ignore.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">FAILED</span><span class="p">]</span> <span class="n">Failed</span> <span class="n">to</span> <span class="n">mount</span> <span class="n">NFSD</span> <span class="n">configuration</span> <span class="n">filesystem</span><span class="o">.</span>
 	
<span class="p">[</span><span class="n">FAILED</span><span class="p">]</span> <span class="n">Failed</span> <span class="n">to</span> <span class="n">start</span> <span class="n">LSB</span><span class="p">:</span> <span class="n">Kernel</span> <span class="n">NFS</span> <span class="n">server</span> <span class="n">support</span><span class="o">.</span>
</pre></div>
</div>
<ul class="simple">
<li>In about 60 seconds boot is complete. Observe the Linux prompt root&#64;vmk180-trd and autostart of JupyterLab server as shown in the example below:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>root@vmk180-trd:~#
[   70.233800] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.122 ServerApp] jupyterlab | extension was successfully linked.
[   77.468923] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.283 LabApp] JupyterLab extension loaded from /usr/lib/python3.9/site-packages/jupyterlab
[   77.469109] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.283 LabApp] JupyterLab application directory is /usr/share/jupyter/lab
[   77.469224] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.300 ServerApp] jupyterlab | extension was successfully loaded.
[   77.469319] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.303 ServerApp] Serving notebooks from local directory: /usr/share/notebooks
[   77.469411] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.303 ServerApp] Jupyter Server 1.13.5 is running at:
[   77.469509] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.303 ServerApp] http://172.19.1.246/lab?token=246f08cec92a774115fe9ca6f3ba5d151deba1ae05aeb993
[   77.469600] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.303 ServerApp]  or http://127.0.0.1:8888/lab?token=246f08cec92a774115fe9ca6f3ba5d151deba1ae05aeb993
[   77.469701] start-jupyter.sh[541]: [I 2022-07-15 09:10:50.303 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[   77.469810] start-jupyter.sh[541]: [C 2022-07-15 09:10:50.322 ServerApp]
[   77.469901] start-jupyter.sh[541]:     
[   77.469989] start-jupyter.sh[541]:     To access the server, open this file in a browser:
[   77.470086] start-jupyter.sh[541]:         file:///home/root/.local/share/jupyter/runtime/jpserver-541-open.html
[   77.470213] start-jupyter.sh[541]:     Or copy and paste one of these URLs:
[   77.470311] start-jupyter.sh[541]:         http://172.19.1.246:8888/lab?token=246f08cec92a774115fe9ca6f3ba5d151deba1ae05aeb993
[   77.470400] start-jupyter.sh[541]:      or http://127.0.0.1:8888/lab?token=246f08cec92a774115fe9ca6f3ba5d151deba1ae05aeb993
 
</pre></div>
</div>
<p>Follow these steps to connect to the jupyter-server using Chrome browser on the laptop.</p>
<blockquote>
<div><strong>Note</strong>:  This demo is tested with Chrome browser only.</div></blockquote>
<ul class="simple">
<li>Copy the generated URL with token on the prompt of Versal target and paste it to the browser address bar of the laptop, for example:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://172.19.1.246:8888/?token=c46d443a39d2648046afdbb9bc5821177ab7cd386c218103
</pre></div>
</div>
<blockquote>
<div><strong>Note</strong>: If for any reason target fails to grab an IP address from the network, Jupyter server would fail to issue an URL. In such a case user is recommended to fix the IP address and restart the jupyter server by following below steps till `Copy the generated URL onto browser.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="n">systemctl</span> <span class="n">stop</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">setup</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">setup</span>
</pre></div>
</div>
<p>To look up the jupyter server IP address and token on the target, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">journalctl</span> <span class="o">-</span><span class="n">u</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">setup</span>
</pre></div>
</div>
<p>Copy the generated URL with token on the prompt of Versal target and paste it to the browser address bar of the laptop, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
http://192.168.1.77:8888/?token=06cfb958c61eb0581bb759f40e3a4c3a6252cef3b7075449
</pre></div>
</div>
<blockquote>
<div><strong>Note</strong>: If you do not see any URL for the Juputer Notebook, you may have to setup a private network. Likely, DHCP is not be available to allot the board an IP address. To setup a private network and start the notebook follow the instruction below.</div></blockquote>
</div>
<div class="section" id="setting-up-a-private-network">
<h3>Setting up a private network<a class="headerlink" href="#setting-up-a-private-network" title="Permalink to this headline">¶</a></h3>
<p>In case of a private network, user can assign a static address within
the subnet of the host machine.</p>
<p><strong>Setting up a private network with target board and the host machine for Windows users:</strong></p>
<ul class="simple">
<li>Ensure a direct connection between the windows host machine and the target
board using an ethernet cable as shown in the Hardware Setup section.</li>
<li>In windows, run command prompt as an admisntrator</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>     Press Windows+R to open the “Run” box.
     Type “cmd” into the box.
     press Ctrl+Shift+Enter to run the command as an administrator
</pre></div>
</div>
<ul class="simple">
<li>Run ipconfig on the windows machine to list available ethernet adapters and
set a static private ip</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
    <span class="c1"># A sample output after executing ipconfig</span>
    <span class="c1"># notice interface &quot;Ethernet&quot; has an auto address assigned with no Default Gateway</span>

    <span class="n">ipconfig</span>

    <span class="n">Ethernet</span> <span class="n">adapter</span> <span class="n">Ethernet</span><span class="p">:</span>

       <span class="n">Connection</span><span class="o">-</span><span class="n">specific</span> <span class="n">DNS</span> <span class="n">Suffix</span>  <span class="o">.</span> <span class="p">:</span>
       <span class="n">Link</span><span class="o">-</span><span class="n">local</span> <span class="n">IPv6</span> <span class="n">Address</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="p">:</span> <span class="n">fe80</span><span class="p">::</span><span class="mi">1</span><span class="n">d8d</span><span class="p">:</span><span class="n">ac40</span><span class="p">:</span><span class="n">ff9b</span><span class="p">:</span><span class="mi">8</span><span class="n">d1</span><span class="o">%</span><span class="mi">21</span>
       <span class="n">Autoconfiguration</span> <span class="n">IPv4</span> <span class="n">Address</span><span class="o">.</span> <span class="o">.</span> <span class="p">:</span> <span class="mf">169.254</span><span class="o">.</span><span class="mf">8.209</span>
       <span class="n">Subnet</span> <span class="n">Mask</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="p">:</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">0.0</span>
       <span class="n">Default</span> <span class="n">Gateway</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="p">:</span>

    <span class="c1"># Set static ip address</span>
    <span class="n">netsh</span> <span class="n">interface</span> <span class="n">ip</span> <span class="nb">set</span> <span class="n">address</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;YOUR INTERFACE NAME&quot;</span> <span class="n">static</span> <span class="s2">&quot;IP_ADDRESS&quot;</span> <span class="s2">&quot;SUBNET_MASK&quot;</span>

    <span class="c1"># Example</span>
    <span class="n">netsh</span> <span class="n">interface</span> <span class="n">ip</span> <span class="nb">set</span> <span class="n">address</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Ethernet&quot;</span> <span class="n">static</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
<ul>
<li><p class="first">Ensure to boot the target board (VCK190) into Linux</p>
</li>
<li><p class="first">Set a private ip address for the target within the subnet of host machine and
verify connectivity.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
   <span class="n">ifconfig</span> <span class="n">eth0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">netmask</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

   <span class="c1"># Perform a ping test to the host form the target</span>
   <span class="n">ping</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span>
</pre></div>
</div>
<p><strong>Setting up a private network with target board and the host machine for Linux users</strong></p>
</li>
<li><p class="first">Make a direct connection between the Linux host machine and the target board using an ethernet cable</p>
</li>
<li><p class="first">Run ifconfig on the Linux machine to list available ethernet adapters and set a static private ip</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
 <span class="c1"># Example to set an ip 10.0.0.1 to ethernet interface enp2s0:</span>
 <span class="n">sudo</span> <span class="n">ifconfig</span> <span class="n">enp2s0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">netmask</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
</pre></div>
</div>
</li>
<li><p class="first">Ensure to boot the target board (VCK190) into Linux</p>
</li>
<li><p class="first">Set a private ip address for the target within the subnet of host machine and
verify connectivity.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
   <span class="n">ifconfig</span> <span class="n">eth0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">netmask</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>

   <span class="c1"># Perform a ping test to the host form the target</span>
   <span class="n">ping</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span>
</pre></div>
</div>
</li>
<li><p class="first">To start Jupyter Notebook run</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">stop</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">setup</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">jupyter</span><span class="o">-</span><span class="n">setup</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="run-the-application">
<h2>Run the Application<a class="headerlink" href="#run-the-application" title="Permalink to this headline">¶</a></h2>
<div class="section" id="run-the-jupyter-notebooks">
<h3>Run the Jupyter Notebooks<a class="headerlink" href="#run-the-jupyter-notebooks" title="Permalink to this headline">¶</a></h3>
<p>This TRD includes the following jupyter notebooks:</p>
<ol>
<li><p class="first"><strong>vmk180-trd-nb1.ipynb</strong>: Demonstrates how to configure a V4L2 device or video raw file from host machine through pcie, processes media content through 2D filter(optional) and transfers processed content to host via PCIe (or) display the content on hdmi monitor.</p>
<blockquote>
<div><p><strong>NOTE</strong> : For PCIe use-cases, host application to be run prior to running notebook (i.e. vmk180-trd-nb1) on end point. the steps to run host application are documented in the following section.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>vmk180-trd-nb2.ipynb</strong>:  Demonstrates how to capture video from a MIPI device, processes it through 2D convolution filter accelerator and display the output on a monitor using a DRM/KMS display device. This notebook uses the GStreamer multimedia framework. In addition, the memory bandwidth is measured and plotted in a parallel notebook.</p>
</li>
<li><p class="first"><strong>vmk180-trd-apm.ipynb</strong>: Demonstrates how to plot the memory bandwidth while a video pipeline is running using the libxapm library with python bindings.</p>
</li>
<li><p class="first"><strong>vmk180-trd-cpu.ipynb</strong>: Demonstrates how to plot the CPU usage while running applications and pipelines.</p>
</li>
<li><p class="first"><strong>vmk180-trd-power.ipynb</strong>: Demonstrates how to plot power consumption of multiple voltage rails throughout the board.</p>
</li>
</ol>
<p>to run the notebooks, follow the below steps:</p>
<ol>
<li><p class="first">On the left pane of the browser, 4 notebooks are available under the folder VMK180 TRD.</p>
</li>
<li><p class="first">Double click to open the notebook</p>
</li>
<li><p class="first">Select ‘Kernel’ → ‘Restart Kernel and Run All Cells’ (This will reset kernel and run’s all cells sequentially) from the top menu bar to run the demo. Scroll down to the end of the notebook to see the video output.</p>
<p><img alt="BoardUI" src="../../../_images/jnbh.png" /></p>
</li>
<li><p class="first">Click the rectangular icon to interrupt the kernel and stop the video stream.</p>
<p><img alt="Interrupt" src="../../../_images/platform1_interrupt.PNG" /></p>
</li>
<li><p class="first">Select ‘Kernel’ → ‘Shutdown Kernel’ → close the notebook tab and move to the next notebook.</p>
</li>
</ol>
<blockquote>
<div><strong>NOTE</strong> : Please follow ‘’step 3 to step 5’’, without this you may observe incorrect behavior while moving to different notebook.</div></blockquote>
</div>
</div>
<div class="section" id="host-machine-software-setup">
<h2>Host Machine Software setup<a class="headerlink" href="#host-machine-software-setup" title="Permalink to this headline">¶</a></h2>
<p><strong>Directory and file description</strong></p>
<p>Following are the list of directories in <code class="docutils literal notranslate"><span class="pre">pcie_host_package</span></code> directory.</p>
<ul class="simple">
<li><strong>apps</strong>: QDMA User space application to configure and control QDMA</li>
<li><strong>docs</strong>: Documentation for the Xilinx QDMA Linux Driver</li>
<li><strong>driver/src</strong>: Provides interfaces to manage the PCIe device and exposes character driver interface to perform QDMA transfers</li>
<li><strong>driver/libqdma</strong>: QDMA library to configure and control the QDMA IP</li>
<li><strong>scripts</strong>: Sample scripts for perform DMA operations</li>
<li><strong>Makefile</strong>: Makefile to compile the driver</li>
<li><strong>pcie_app</strong>: This application receives frame buffer data from host, processes it and sends frame buffer to host using QDMA driver</li>
</ul>
<blockquote>
<div><strong>NOTE</strong> : Make sure, the VMK180 board is powered on before booting the HOST machine to enumerate VMK180 board as PCIe endpoint device successfully</div></blockquote>
<ul class="simple">
<li>Power on the HOST machine</li>
<li>Execute following command on HOST machine’s terminal to check If the Board is linking up:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lspci</span> <span class="o">-</span><span class="n">vd</span> <span class="mi">10</span><span class="n">ee</span><span class="p">:</span>
</pre></div>
</div>
<p>On successful Linkup below entry appears followed by additional capabilities of VMK180 as endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">03</span><span class="p">:</span><span class="mf">00.0</span> <span class="n">RAM</span> <span class="n">memory</span><span class="p">:</span> <span class="n">Xilinx</span> <span class="n">Corporation</span> <span class="n">Device</span> <span class="n">b03f</span>
</pre></div>
</div>
<p>If above entry is missing QDMA driver will not be able to recognized PCIe endpoint device.</p>
<ul class="simple">
<li>if not already done, copy <code class="docutils literal notranslate"><span class="pre">pcie_host_package</span></code> directory to PCIe host machine.</li>
</ul>
</div>
<div class="section" id="updating-the-pcie-device-id-if-needed">
<h2>Updating the PCIe device ID (if needed)<a class="headerlink" href="#updating-the-pcie-device-id-if-needed" title="Permalink to this headline">¶</a></h2>
<p>Make sure that PCIe Device ID in the driver is matching to Device ID observed in linkup status. in above output <code class="docutils literal notranslate"><span class="pre">b03f</span></code> is device ID.</p>
<p>During the PCIe DMA IP customization in Vivado you can specify a PCIe Device ID. This Device ID must be recognized by the driver in order to properly identify the PCIe QDMA device.</p>
<p>To Check/modify the PCIe Device ID in the driver, open the <code class="docutils literal notranslate"><span class="pre">$vmk180-trd/pcie_host_package/qdma/driver/src/pci_ids.h</span></code> file (line no : 320) from the driver source and search for the pcie_device_id struct.
This struct defines the PCIe Device IDs that are recognized by the driver in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">PCI_DEVICE</span> <span class="p">(</span><span class="mh">0x10ee</span><span class="p">,</span> <span class="mh">0xb03f</span><span class="p">),},</span> 
</pre></div>
</div>
<p>Add, remove, or modify the PCIe Device IDs in this struct. The PCIe DMA driver will only recognize device IDs identified in this struct as PCIe QDMA devices. User can also remove PCIe Device IDs that are not be used in their solution.
On every modification, the driver must be un-installed and recompiled, if compiled previously.</p>
<p>For additional information refer https://xilinx.github.io/dma_ip_drivers/master/QDMA/linux-kernel/html/build.html</p>
<ul class="simple">
<li>follow below steps to Install the QDMA driver</li>
</ul>
<blockquote>
<div><strong>NOTE</strong> : Root permissions will be required to install qdma driver.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">pcie_host_package</span><span class="o">/</span><span class="n">qdma</span>
<span class="n">make</span> 
</pre></div>
</div>
<ul class="simple">
<li>Install the QDMA driver</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">install</span><span class="o">-</span><span class="n">mods</span>
</pre></div>
</div>
<ul class="simple">
<li>Configure the QDMA module paramters using following script:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./scripts/qdma_generate_conf_file.sh &lt;bus_num&gt; &lt;num_pfs&gt; &lt;mode&gt; &lt;config_bar&gt; &lt;master_pf&gt;` 
</pre></div>
</div>
<p>Ex: (Assuming PCIe BDF - 03:00.0)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">qdma_generate_conf_file</span><span class="o">.</span><span class="n">sh</span> <span class="mh">0x03</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<ul class="simple">
<li>For loading the driver, execute the following command: (This is required only First time, from next boot driver loads automatically)</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">modprobe</span> <span class="n">qdma</span><span class="o">-</span><span class="n">pf</span>
</pre></div>
</div>
<ul class="simple">
<li>Setup and Enable Queues for H2C and C2H:  (Refer link in NOTE_1 for more details)
Allocate the Queues to a function. QDMA IP supports maximum of 2048 queues.
By default, all functions have 0 queues assigned.
qmax configuration parameter enables the user to update the number of queues for a PF.
This configuration parameter indicates “Maximum number of queues associated for the current pf”.</li>
</ul>
<p>To set 1024 as qmax for PF0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> echo 1024 &gt; /sys/bus/pci/drivers/qdma-pf/$BDF/qdma/qmax
 
</pre></div>
</div>
<ul class="simple">
<li>To Add a Queue:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma</span><span class="o">&lt;</span><span class="n">bbddf</span><span class="o">&gt;</span> <span class="n">q</span> <span class="n">add</span> <span class="n">idx</span> <span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">mode</span> <span class="o">&lt;</span><span class="n">st</span><span class="o">|</span><span class="n">mm</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="nb">dir</span> <span class="o">&lt;</span><span class="n">h2c</span><span class="o">|</span><span class="n">c2h</span><span class="o">|</span><span class="n">bi</span><span class="o">&gt;</span><span class="p">]</span> 
 
</pre></div>
</div>
<p>Ex: (Assuming PCIe BDF - 03:00.0)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma03000</span> <span class="n">q</span> <span class="n">add</span> <span class="n">idx</span> <span class="mi">0</span> <span class="n">mode</span> <span class="n">mm</span> <span class="nb">dir</span> <span class="n">h2c</span>
<span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma03000</span> <span class="n">q</span> <span class="n">add</span> <span class="n">idx</span> <span class="mi">1</span> <span class="n">mode</span> <span class="n">mm</span> <span class="nb">dir</span> <span class="n">c2h</span> 
</pre></div>
</div>
<ul class="simple">
<li>To start a Queue:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma</span><span class="o">&lt;</span><span class="n">bbddf</span><span class="o">&gt;</span> <span class="n">q</span> <span class="n">start</span> <span class="n">idx</span> <span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span> <span class="p">[</span><span class="nb">dir</span> <span class="o">&lt;</span><span class="n">h2c</span><span class="o">|</span><span class="n">c2h</span><span class="o">|</span><span class="n">bi</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>Ex: (Assuming PCIe BDF - 03:00.0)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma03000</span> <span class="n">q</span> <span class="n">start</span> <span class="n">idx</span> <span class="mi">0</span> <span class="nb">dir</span> <span class="n">h2c</span>
<span class="n">dma</span><span class="o">-</span><span class="n">ctl</span> <span class="n">qdma03000</span> <span class="n">q</span> <span class="n">start</span> <span class="n">idx</span> <span class="mi">1</span> <span class="nb">dir</span> <span class="n">c2h</span>  
   
</pre></div>
</div>
<ul class="simple">
<li>Build host application:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">pcie_app</span><span class="o">/</span>
</pre></div>
</div>
<ul class="simple">
<li>modify macros <code class="docutils literal notranslate"><span class="pre">H2C_DEVICE</span></code> , <code class="docutils literal notranslate"><span class="pre">C2H_DEVICE</span></code> , <code class="docutils literal notranslate"><span class="pre">REG_DEVICE_NAME</span></code> in pcie_host.cpp , using /dev/ nodes generated for  the pcie device based on its <code class="docutils literal notranslate"><span class="pre">Bus:Device:Function</span> <span class="pre">number</span></code>.</li>
</ul>
<p>Ex: Assuming PCIe BDF as <code class="docutils literal notranslate"><span class="pre">03:00.0</span></code> the above macros need to be set as:</p>
<ul class="simple">
<li>If H2C queue index is 0 device node is <code class="docutils literal notranslate"><span class="pre">/dev/qdma03000-MM-0</span></code>  (Queue index for H2C is set in above “Add a queue” step)</li>
<li>If C2H queue index is 1 device node is <code class="docutils literal notranslate"><span class="pre">/dev/qdma03000-MM-1</span></code>  (Queue index for C2H is set in above “Add a queue” step)</li>
</ul>
<p>REG_DEVICE_NAME is <code class="docutils literal notranslate"><span class="pre">/sys/bus/pci/devices/0000:03:00.0/resource0</span></code></p>
<ul class="simple">
<li>Modify pcie_app/app1.pro line no 35 and 39 for opencv library path and opencv include path before compilation</li>
<li>set <code class="docutils literal notranslate"><span class="pre">QMAKE_PATH</span></code> to installed QT qmake path</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export QMAKE_PATH=/opt/Qt5.9/5.9/gcc_64/bin/qmake`
</pre></div>
</div>
<p>compile application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">do_compile</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="generate-of-raw-video-input-file">
<h2>Generate of Raw video Input file.<a class="headerlink" href="#generate-of-raw-video-input-file" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><strong>Note</strong>:: : Ensure that Gstreamer packages installed on the Linux PC. If using Ubuntu distribution, ensure that the version is atleast 16.04.</div></blockquote>
<ol class="simple">
<li>Download VP9 encoded sample file such as <a class="reference external" href="https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c0/Big_Buck_Bunny_4K.webm/Big_Buck_Bunny_4K.webm.480p.vp9.webm">Big_Buck_Bunny</a></li>
<li>Run following GST command to create 3840x2160 resolution raw file with YUY2 format with 30fps</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;file_path&gt;/Big_Buck_Bunny_4K.webm.480p.vp9.webm ! decodebin ! queue ! videoconvert ! videoscale ! videorate ! video/x-raw, width=3840, height=2160, format=YUY2, framerate=30/1 ! filesink location=&lt;file_path&gt;/4k30.yuv
</pre></div>
</div>
<ul class="simple">
<li>Run following GST command to create 1920x1080 resolution raw file with YUY2 format with 30fps</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 filesrc location=&lt;file_path&gt;/Big_Buck_Bunny_4K.webm.480p.vp9.webm ! decodebin ! queue ! videoconvert ! videoscale ! videorate ! video/x-raw, width=1920, height=1080, format=YUY2, framerate=30/1 ! filesink location=&lt;file_path&gt;/1080p30.yuv
</pre></div>
</div>
</div>
<div class="section" id="run-host-and-ep-applications">
<h2>Run Host and EP applications<a class="headerlink" href="#run-host-and-ep-applications" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="steps-to-run-host-application">
<h2>Steps to run Host application :<a class="headerlink" href="#steps-to-run-host-application" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><strong>Note:</strong>  Make sure, HOST application is launched before starting EP application.</div></blockquote>
<blockquote>
<div>As described in the previous sections host application provides control information to the Endpoint to run any usecase.</div></blockquote>
<p>Here are list of control information passed to endpoint :-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">--</span> <span class="n">Usecase</span> <span class="n">to</span> <span class="n">run</span><span class="o">.</span>
   <span class="o">--</span> <span class="n">Resolution</span><span class="o">.</span>
   <span class="o">--</span> <span class="n">Filter</span> <span class="nb">type</span><span class="o">.</span>
   <span class="o">--</span> <span class="n">FPS</span> <span class="p">(</span><span class="n">Default</span> <span class="mi">30</span><span class="n">fps</span><span class="p">)</span><span class="o">.</span>
   <span class="o">--</span> <span class="n">Rawvideofile</span> <span class="p">(</span><span class="k">with</span> <span class="n">abosolute</span> <span class="n">path</span> <span class="n">of</span> <span class="n">video</span> <span class="n">file</span> <span class="n">to</span> <span class="n">play</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>This example demonstrates Usecase-1(MIPI –&gt; 2D Image Processing –&gt; Appsink(PCIe))</p>
<ol>
<li><p class="first">First run Host Machine Software setup steps,Then execute pcie_host_app application as following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="c1"># ./pcie_host_app</span>
</pre></div>
</div>
</li>
<li><p class="first">From the six usecases select any one of the usecase or 4 to quit application.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="c1"># ./pcie_host_app</span>
	<span class="n">Enter</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">2</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">3</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span><span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">4</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">5</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">6</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">7</span> <span class="n">to</span> 	<span class="p">:</span> <span class="n">Exit</span> <span class="n">application</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p class="first">Select desired resolution (Enter 1 or 2 ):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="c1"># ./pcie_host_app </span>
	<span class="n">Enter</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">2</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">3</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span><span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">4</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">5</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">6</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">7</span> <span class="n">to</span> 	<span class="p">:</span> <span class="n">Exit</span> <span class="n">application</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">1</span>
	<span class="n">select</span> <span class="n">the</span> <span class="n">resolution</span> 
	<span class="mf">1.</span> <span class="mi">3840</span><span class="n">x2160</span>
	<span class="mf">2.</span> <span class="mi">1920</span><span class="n">x1080</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p class="first">From below table select anyone filter-type   (Enter 0 - 10)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="c1"># ./pcie_host_app</span>
	<span class="n">Enter</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">2</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">3</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span><span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">4</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">5</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">6</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">7</span> <span class="n">to</span> 	<span class="p">:</span> <span class="n">Exit</span> <span class="n">application</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">1</span>
	<span class="n">select</span> <span class="n">the</span> <span class="n">resolution</span> 
	<span class="mf">1.</span> <span class="mi">3840</span><span class="n">x2160</span>
	<span class="mf">2.</span> <span class="mi">1920</span><span class="n">x1080</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">1</span>  
	<span class="n">Enter</span> <span class="nb">filter</span> <span class="nb">type</span> <span class="n">value</span> <span class="mi">0</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">9</span>
</pre></div>
</div>
</li>
<li><p class="first">When application prompts below prints launch (vmk180-trd-nb1.ipynb) jupyter notebook.</p>
</li>
</ol>
<blockquote>
<div>Note : Set ‘res’ variable in vmk180-trd-nb1.ipynb to appropriate value to ensure resolution is same at host and end point.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```

	Please run &#39;vmk180-trd-nb1.ipynb&#39; jupyter notebook from endpoint (To launch endpoint application)
	To quit usecase, hit &lt;q+enter&gt; from host 

```
</pre></div>
</div>
<blockquote>
<div><strong>Note:</strong>  Only for <code class="docutils literal notranslate"><span class="pre">MIPI</span></code> usecase , hit &lt;q+enter&gt; from host to quit.</div></blockquote>
<p>From Usecase-3, User is expected to pass rawvideo file as an additional parameter.</p>
<ol>
<li><p class="first">Enter input filename with absolute path to play and depending on rawvideo file size usecases stops</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="c1"># ./pcie_host_app </span>
 	<span class="n">Enter</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
   	<span class="n">Enter</span> <span class="mi">2</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">MIPI</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span> <span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">3</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span><span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">4</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">pciesink</span><span class="o">--&gt;</span><span class="n">displayonhost</span>
	<span class="n">Enter</span> <span class="mi">5</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">filter2d</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">6</span> <span class="n">to</span> <span class="n">run</span>  <span class="p">:</span> <span class="n">RawVideofilefromHost</span><span class="o">--&gt;</span> <span class="n">pciesrc</span><span class="o">--&gt;</span><span class="n">kmssink</span>
	<span class="n">Enter</span> <span class="mi">7</span> <span class="n">to</span> 	<span class="p">:</span> <span class="n">Exit</span> <span class="n">application</span>
	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span> <span class="p">:</span> <span class="mi">3</span>
   	<span class="n">select</span> <span class="n">the</span> <span class="n">resolution</span>
   	<span class="mf">1.</span> <span class="mi">3840</span><span class="n">x2160</span>
   	<span class="mf">2.</span> <span class="mi">1920</span><span class="n">x1080</span>
   	<span class="n">Enter</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span><span class="mi">2</span>
   	<span class="n">Enter</span> <span class="nb">input</span> <span class="n">filename</span> <span class="k">with</span> <span class="n">path</span> <span class="n">to</span> <span class="n">transfer</span><span class="p">:</span> <span class="o">~/</span><span class="n">xxx</span><span class="o">.</span><span class="n">yuv</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>To execute end-point application:</strong></p>
<ol class="simple">
<li>Launch vmk180-trd-nb1.ipynb jupyter notebook. (For MIPI use case modify ‘res’ variable same as one selected at host application).</li>
</ol>
<blockquote>
<div><strong>Note:</strong> Endpoint application exits after running the usecase, Hence restart <code class="docutils literal notranslate"><span class="pre">vmk180-trd-nb1.ipynb</span></code> jupyter notebook to relaunch the endpoint 	   application.</div></blockquote>
<p>Following Table lists the supported filter configuration in the design.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Filter_type</th>
<th>Filter name</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Blur filter</td>
</tr>
<tr>
<td>1</td>
<td>Edge filter</td>
</tr>
<tr>
<td>2</td>
<td>Horizontal Edge filter</td>
</tr>
<tr>
<td>3</td>
<td>Vertical Edge filter</td>
</tr>
<tr>
<td>4</td>
<td>Emboss filter</td>
</tr>
<tr>
<td>5</td>
<td>HGRAD filter</td>
</tr>
<tr>
<td>6</td>
<td>VGRAD filter</td>
</tr>
<tr>
<td>7</td>
<td>Identity filter</td>
</tr>
<tr>
<td>8</td>
<td>Sharpe filter</td>
</tr>
<tr>
<td>9</td>
<td>Horizontal Sobel filter</td>
</tr>
<tr>
<td>10</td>
<td>Vertical Sobel filter</td>
</tr>
</tbody>
</table>
<p>A filter version of big buck bunny video will start playing on DP monitor.</p><p><strong>Next Steps</strong></p>
<ul class="simple">
<li>Go back to the <a class="reference internal" href="../platform1_landing.html"><span class="doc">VMK180 TRD design start page</span></a></li>
</ul>
<p><strong>License</strong></p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2022 Xilinx</p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Design Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../building_the_design.html" class="btn btn-neutral float-right" title="Tool Flow Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc..
      <span class="lastupdated">Last updated on August 18, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>